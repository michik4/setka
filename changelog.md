# Changelog
> Версии нумеруются по принципу <br>
> `{релиз версия}`.`{версия с дополнениями}`.`{bugfix версия}` <br>
> релиз версия в плане какой-то глобальный патч с какой-то новой жесткой штукой

## 0.3.0 
> dev time 21.04.25 - 

### New features:
- Добавлены комментарии
  - Информативное уведомление о новых комментариях
  - Информативное уведомление об ответах на комментарии
  - Просмотр всех комментариев к публикации в отдельной вкладке
  - Лента комментариев от всех пользователей в виде вкладки
- Добавлена вкладка "Проверить функции"
  - Быстрая проверка всех основных функций сайта в одном месте
  - Удобная навигация по разделам для тестирования
- Добавлен правый сайдбар с инструментами пользователя
  - Перенесен мини-плеер в правый сайдбар для улучшения UX
  - Подготовлена структура для дополнительных инструментов (создание постов, управление группами)
  - Реализовано сохранение состояния модулей в localStorage для персистентности между сессиями
  - Добавлена поддержка страничных модулей (например, информация о группе)
  - Быстрый доступ к сообществам, друзьям и закладкам
  - Персонализированные рекомендации и уведомления
- Расширено управление группами и сообществами:
  - Добавлена страница управления сообществом для администраторов и создателей
  - Доступно редактирование описания сообщества
  - Реализовано управление участниками (удаление, бан)
  - Добавлена возможность назначения и снятия администраторов
  - Улучшен интерфейс управления группой через систему вкладок
  - Добавлена возможность загрузки и изменения аватаров сообществ
  - Улучшенное управление контентом сообщества
  - Улучшенный интерфейс с отдельными вкладками для медиа-контента (фото, музыка)
  - Улучшенное отображение музыкальных альбомов во вкладке "Музыка" витрины группы
  - Доработанный дизайн отображения треков с индикацией выбранного трека
- Добавлено отображение информации о сообществе в постах в ленте новостей:
  - В заголовке поста теперь отображается название группы, если пост опубликован от имени сообщества
  - При клике на название группы происходит переход на страницу сообщества
  - Добавлена визуальная индикация постов сообществ с помощью стилей
  - Добавлено отображение аватара сообщества вместо аватара автора в постах от имени сообщества
  - Улучшено отображение информации об авторе поста в публикациях от имени сообщества
- Теперь пост на стене пользователя является сущностью `Post`, а не `wallPost` для единобразия ленты и упрощения разработки
- Добавлена страница настроек пользователя:
  - Реализована вкладочная структура для разных категорий настроек (основные, приватность, уведомления)
  - Добавлена возможность редактирования личной информации пользователя
  - Добавлена возможность изменения пароля
  - Добавлены настройки приватности и уведомлений
  - Добавлены кнопки перехода на страницу настроек в хедер и боковое меню
- Реализована динамическая подгрузка постов при скролле:
  - Внедрена система бесконечного скролла на основных лентах сайта
  - Добавлена подгрузка постов для страницы новостей
  - Добавлена подгрузка постов на странице сообщества
  - Добавлена подгрузка постов на стене пользователя (в том числе своей страницы)
  - Реализованы индикаторы загрузки при подгрузке новых данных
  - Добавлена оптимизация запросов к серверу с использованием пагинации
  - Добавлен визуальный индикатор "Конец ленты" при отсутствии дополнительных постов
- Добавлен функционал "Друзья"
  - Возможность добавлять/удалять из друзей
  - Система отправки и принятия/отклонения заявок в друзья
  - Отображение статуса дружбы на странице пользователяpamphlet
  - Возможность просмотра списка друзей
  - Отображение входящих заявок в друзья
- Создана отдельная сущность для очереди воспроизведения:
  - Выделен независимый QueueContext для управления очередью треков
  - Добавлен модуль QueueManager в правый сайдбар
  - Реализована синхронизация между QueueContext и PlayerContext через события
  - Сохранение истории прослушанных треков
  - Возможность очистки очереди
  - Интерфейс для перетаскивания треков (drag-and-drop) и изменения порядка в очереди
  - Переключение между списком очереди и историей воспроизведения
  - Автоматическая синхронизация состояния между различными плеерами
- Реализован полноценный функционал музыкальных альбомов:
  - Создан раздел "Альбомы" для организации музыки пользователя
  - Реализована возможность создания, редактирования и удаления альбомов
  - Добавлена поддержка приватных и публичных альбомов
  - Добавлена возможность загрузки и управления треками в альбомах
  - Создана детальная страница альбома с информацией и списком треков
  - Добавлены обложки к альбомам и трекам для лучшей визуализации
  - Разработан универсальный компонент TrackItem для отображения треков в различных частях приложения
  - Реализовано воспроизведение альбомов с автоматическим добавлением всех треков в очередь
  - Добавлена возможность быстрого добавления треков в личную библиотеку
  - Реализован адаптивный дизайн для корректного отображения на всех устройствах, включая мобильные
- Добавлена витрина в Сообщества
- Добавлен универсальный компонент для треков 
- Реализовано использование универсального компонента для отображения треков в постах:
  - Заменен собственный код отображения треков в постах на UniversalTrackItem
  - Упрощены стили и уменьшен дублирующийся код
  - Улучшена совместимость между различными плеерами и источниками треков
  - Стандартизировано отображение треков по всему приложению
- Улучшено воспроизведение треков в Showcase:
  - При проигрывании трека из Showcase (витрины профиля) очередь очищается и заполняется всеми треками Showcase
  - При проигрывании трека из Showcase группы очередь очищается и заполняется всеми треками группы
  - Добавлена возможность переопределить стандартное поведение воспроизведения в UniversalTrackItem
  - Улучшена информативность источника треков в очереди (пользователь/группа/альбом)
- Изменен стиль отображения треков в Showcase на вертикальный список:
  - Треки в витрине профиля и сообщества отображаются в вертикальном списке, как и в постах
  - Унифицировано отображение треков по всему приложению
  - Улучшена читаемость и взаимодействие с треками в разделе музыки

### UI/UX fix:
- Улучшен дизайн постов
- Улучшено центрирование интерфейса:
  - Лента контента теперь строго по центру экрана
  - Левый и правый сайдбары выровнены относительно центральной части
  - Улучшены стили мини-плеера для корректного отображения в узком сайдбаре
- Добавлена поддержка модульной структуры правого сайдбара:
  - Возможность скрытия/отображения модулей
  - Интуитивный интерфейс для управления модулями
  - Автоматическая сортировка модулей по приоритету
- Улучшен дизайн отображения информации о сообществе в постах:
  - Визуальное выделение названия сообщества фоновым цветом
  - Добавлены анимации при наведении на элементы
  - Обновлен дизайн заголовка поста для лучшей читаемости
  - Реализовано отображение аватаров сообществ в ленте новостей
- Польностью переделана цветовая палитра
- Улучшены индикаторы загрузки контента:
  - Добавлены спиннеры загрузки при подгрузке постов
  - Добавлены информативные сообщения об ошибках с возможностью повторной загрузки
  - Реализованы плавные переходы между состояниями загрузки
  - Добавлен элегантный визуальный разделитель "Конец ленты" для улучшения UX
- Улучшен интерфейс управления музыкой:
  - Создан удобный интерфейс для работы с очередью воспроизведения
  - Визуальные индикаторы текущего воспроизводимого трека в очереди
  - Удобный доступ к истории прослушивания
  - Современный дизайн музыкальных альбомов с анимациями и трансформациями
  - Адаптивная верстка страницы альбома для корректного отображения при открытом правом сайдбаре
  - Визуальные индикаторы проигрывания трека с анимированными элементами
- Улучшен процесс работы с музыкой в Showcase:
  - Более интуитивное воспроизведение треков из витрины
  - Естественное продолжение воспроизведения в рамках одной секции с тем же контекстом
  - Упрощение интерфейса для работы с музыкой в профиле и группах
  - Изменено отображение треков с сетки на вертикальный список для единообразия с постами
  - Улучшена читаемость списка треков за счет более четкого разделения между ними

### Bugfix:
- Исправлено множество ошибок связанных с проигрыванием треков не находящихся в библиотеке пользователя
- Исправлена ошибка типизации в SidebarModulesContext при обновлении модулей
  - Добавлено корректное сохранение типа модуля при обновлении его данных
  - Добавлены типы для модуля uuid
  - Добавлен файл объявления типов для uuid
- Исправлены ссылки на участников группы в правом сайдбаре (адреса изменены с /profile/:id на /users/:id)
- Исправлено отображение аватаров пользователей в модуле участников группы
  - Добавлена корректная загрузка аватаров из базы данных через связи в запросах
- Добавлены маршруты для страниц участников и администраторов группы (/groups/:id/members и /groups/:id/admins)
- Исправлена ошибка с неработающей кнопкой "Все" в модуле участников группы
- Исправлена ошибка плеера при который трек играл не с начала, а с записанной ранее метки (метки нужны для разработки кросс-оконной передачи состояния в плеере в отдельном окне (тестовая функция)).
- Исправлены проблемы с загрузкой больших объемов данных на страницах:
  - Оптимизирована загрузка постов с использованием пагинации
  - Ускорена первоначальная загрузка страниц за счет уменьшения объема загружаемых данных
  - Исправлены ошибки при отображении пустых лент
- Устранена проблема с синхронизацией состояния между плеерами в различных частях приложения:
  - Внедрена централизованная система событий для синхронизации состояния
  - Улучшена инициализация данных при загрузке компонентов
  - Исправлена потеря очереди воспроизведения при переключении между страницами
- Устранены ошибки с конфликтами воспроизведения аудио:
  - Создан новый сервис AudioChannelService для управления каналами воспроизведения
  - Реализовано предотвращение дублирования аудио между разными компонентами
  - Добавлена система приоритетов для каналов воспроизведения
  - Внедрена валидация аудио URL для избежания ошибок воспроизведения
  - Реализован сервис AudioValidationService для диагностики проблем с аудио
  - Добавлено логирование ошибок воспроизведения для отладки
- Исправлена ошибка "AbortError: The play() request was interrupted by a call to pause()" в AudioChannelService:
  - Добавлена корректная обработка прерываний воспроизведения
  - Реализованы задержки между операциями остановки и воспроизведения для предотвращения гонки условий
  - Улучшена обработка ошибок в методах playTrack и pauseActiveChannel
  - Добавлены таймауты для предотвращения зависаний при переключении состояний
  - Оптимизирована синхронизация между разными плеерами для минимизации конфликтов
- Исправлены проблемы синхронизации воспроизведения треков из постов с плеером:
  - Использование универсального компонента для треков упрощает управление состоянием
  - Унифицированы методы воспроизведения и добавления в библиотеку
  - Улучшена обработка состояния треков на уровне компонентов
- Исправлена проблема с неправильным поведением очереди при воспроизведении треков из Showcase:
  - Теперь при выборе трека из Showcase плеер воспроизводит последовательно все треки из этого раздела
  - Упорядочена логика работы с источниками треков для более предсказуемого поведения
  - Исправлена проблема при воспроизведении треков, непосредственно не принадлежащих пользователю
- Исправлена непоследовательность отображения треков в разных частях приложения:
  - Унифицировано отображение треков в постах и в витрине (Showcase)
  - Устранено различие между отображением треков в профиле и группе

### Todo:
- Завершить интеграцию инструментов создания постов в правый сайдбар
- Доработать интерфейс управления группами в правом сайдбаре
- Оптимизировать производительность загрузки страничных модулей
- Завершить переработку контекстов плееров и объединение их в единую систему

## patch 0.2.0
### dev comment
В этой версии я постарался решить все самые UX неприятные элементы. 

Подбираемся к релизу. 
### New features:
- Увеличено максимальное количество фотографий в посте с 4 до 20.
- Добавлено отображение альбомов в постах с сеткой до 5 фотографий и индикатором дополнительных фотографий.
- Увеличен размер загружаемых аудио с 25мб до 100мб (~110 мин при битрейте 128kbps), в теории можно теперь залить целый подкаст или альбом 1 аудио.

### Bugfix:
- Photo grid
  - Исправлено отображение сетки фотографий в постах на странице группы (фотографии теперь отображаются в правильной сетке вместо столбца).
  - Полностью переработана сетка фотографий для эстетичного отображения от 1 до 5 изображений в посте.
  - Добавлен индикатор количества дополнительных фотографий при их количестве более 5.
- Исправлено отображение боковой панели в PhotoViewer (добавлен вертикальный flex-direction для корректного отображения элементов).
- Исправлена проблема с загрузкой альбомов в постах, теперь альбомы корректно отображаются.

### UI/UX fix
- Изменен стиль отображения треков в постах на вертикальный список для более компактного и удобного просмотра.
- Оптимизирован размер обложек треков и улучшена читаемость информации о треках.
- Добавлен визуальный индикатор воспроизводимого трека.
- Исправлена проблема с отображением треков в строку - теперь треки корректно отображаются в столбик.

### Todo:
- Нужно найти источник для апскейла обложек треков (сейчас они берутся из мета-данных в плохом расширении)
- Полная переработка grid-а для фотографий (добавить изменения сетки взависимости от соотношения фотографий)
- Полная переработка контекстов плееров и слияние их всех в один. 

## patch 0.1.0
### Bugfix:
- Исправлены стили треков в очереди воспроизведения на странице музыки.
- Исправлены ошибки при переходе на страницу музыки, треки из "Моя музыка" попадали в очередь без учета пагинации (до 20).
- Исправлены повторы очереди и трека в плеере в отдельном окне.

### New features:
- НАКОНЕЦТО к постам можно прикрепить музыку. 
  - Добавлена также синхронизация треков из постов с мини плеером в хеддере и с отдельным плеером в окне. 


### UI/UX features:
- Доработан плеер в отдельном окне
  - Соседние обложки при наведении показывают название и автора трека.
  - Добавлена возможность переключать треки при нажатии на соседние обложки.
  - Добавлены анимации:
    - Перехода между треками.
    - При открытии вкладки "очередь":
      - скролл до проигрываемого трека;
      - плавная смена режима из плеера в очередь и обратно.
    - Маркер проигрывания в правом нижнем углу.
    - Добавлены анимации на кнопки плеера.
- Добавлен маркер открытого плеера в отдельном окне в верхней части сайта.

### Bugtrack:
- При воспроизведении треков из поста в плеере в отдельном окне возникают ошибки конфликта воспроизведения аудио.

### Todo:
- Нужна доработка синхронизации треков из постов с плеером в отдельном окне.
- Нужна переработка контекстов плееров и сведенение их в одну сущность.